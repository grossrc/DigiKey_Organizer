<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Intelligent Parts Catalog</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='catalog/catalog.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='catalog/dendrogram-catalog.css') }}">
</head>
<body class="cat-body">
  <main class="cat-main">
    <div class="cat-wrap">
      <header class="catalog-hero" id="hero">
        <h1 class="page-title">Parts Catalog</h1>
      </header>

      <!-- Common high-usage categories (large cards inside styled container) -->
      <section id="common-categories" class="common-categories">
        <div class="common-inner">
          <div class="common-label">Common Categories</div>
          <div class="common-grid">
            {% for c in common_categories %}
              {% set has_parts = (c.parts or 0) > 0 and c.category_id %}
              {% if has_parts %}
                <a class="common-card" href="{{ url_for('catalog_category', category_id=c.category_id) }}" title="{{ c.title }}">
                  <div class="cc-title">{{ c.title }}</div>
                  <div class="cc-sub">{{ c.parts }} parts</div>
                </a>
              {% else %}
                <div class="common-card disabled" title="{{ c.title }}">
                  <div class="cc-title">{{ c.title }}</div>
                  <div class="cc-sub zero">0 parts</div>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </section>

      <!-- Search bar relocated below common categories -->
      <div class="dendro-search-bar">
        <label for="dendro-search" class="sr-only">Search categories</label>
        <input id="dendro-search" type="text" placeholder="Search categories..." autocomplete="off" />
        <div class="search-controls">
          <button id="dendro-prev" class="nav" title="Previous match" disabled>&larr;</button>
          <span id="dendro-match-count" class="match-count">0</span>
          <button id="dendro-next" class="nav" title="Next match" disabled>&rarr;</button>
          <button id="dendro-clear" class="clear" title="Clear search" disabled>&times;</button>
        </div>
        <button id="dendro-reset" class="reset danger" title="Reset search & tree" disabled>Reset</button>
      </div>

      <!-- Horizontal tree wrapper (Technology & Physics default) -->
      <div id="tree-wrapper" class="tree-wrapper">
        <div id="tree-columns" class="tree-columns"></div>
        <svg id="tree-connections" class="tree-connections"></svg>
      </div>

    </div>
  </main>
  <footer class="cat-footer"><div class="cat-wrap">Smart Categorization â€¢ Unified Functional + Physics Ontology</div></footer>
  <script src="{{ url_for('static', filename='catalog/dendrogram-catalog.js') }}"></script>
</body>
</html>