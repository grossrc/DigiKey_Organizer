id: opamp
version: 1.1.0
source_categories:
  - "Linear - Amplifiers - Instrumentation, OP Amps, Buffer Amps"
source_category_patterns:
  - "(?i)Amplifiers?.*(OP|Operational)\\s*Amp"
  - "(?i)Instrumentation.*Amplifiers?"

traits:
  - has_package_code
  - has_mounting_type
  - has_operating_temp
  - has_dimensions

attributes:
  map:
    # Classification / topology
    amplifier_type: ["Amplifier Type"]                 # e.g., General Purpose, Instrumentation, Isolation, CFA, Zero-Drift
    number_of_circuits: ["Number of Circuits"]         # channels

    # Bandwidth / speed
    gbw_hz:
      - "Gain Bandwidth Product"                       # common label
      - "-3db Bandwidth"                               # alias seen in your sample
    slew_rate_vus: ["Slew Rate"]                       # may be "-"; we keep it optional

    # Noise / precision
    vnoise_nvhz:
      - "Voltage - Noise (Typ) @ f"
      - "Voltage - Noise Density"
    vos_v:
      - "Voltage - Input Offset"
      - "Input Offset Voltage"
    vos_drift_uvc:
      - "Voltage - Input Offset Drift"                 # µV/°C (normalize downstream if desired)
    cmrr_db:
      - "CMRR, PSRR (Typ) @ Min/Common"               # sometimes combined
      - "CMRR (Typical)"
      - "CMRR (Min)"

    # Input common-mode / output swing (often text; leave as passthrough)
    input_voltage_range: ["Voltage - Input Common Mode"]
    output_type: ["Output Type"]                       # Rail-to-Rail, Push-Pull, etc.
    rail_to_rail: ["Rail-to-Rail"]                     # Some vendors expose directly as Yes/No

    # Currents & drive
    input_bias_current_a:
      - "Current - Input Bias"
      - "Input Bias Current"
    supply_current_a:
      - "Current - Supply"
      - "Current - Supply (per Channel)"
    output_current_per_channel_a:
      - "Current - Output / Channel"
      - "Current - Output"

    # Supply range (handle both label styles)
    supply_min_v:
      - "Voltage - Supply, Single/Dual (±) Min"
      - "Voltage - Supply Span (Min)"
      - "Voltage - Supply (Min)"
    supply_max_v:
      - "Voltage - Supply, Single/Dual (±) Max"
      - "Voltage - Supply Span (Max)"
      - "Voltage - Supply (Max)"

    # Isolation-amp extras (optional; populated only when present)
    isolation_voltage_v: ["Voltage - Isolation"]
    isolation_type: ["Isolation Type"]
    isolation_common_mode_transient_kv_us:
      - "Common Mode Transient Immunity (Min)"
      - "CMTI (Min)"

    # Environment/mech handled by traits
    operating_temp_range: ["Operating Temperature"]
    mounting_type: ["Mounting Type"]
    package_case_text: ["Package / Case"]
    size_dim_text: ["Size / Dimension"]
    height_mm_text: ["Height"]

  validators:
    gbw_hz: { gt: 1e3 }              # > 1 kHz (very loose guard)
    number_of_circuits: { gt: 0 }
    supply_min_v: { gt: 0 }
    supply_max_v: { gt: 0 }

display_order:
  - amplifier_type
  - number_of_circuits
  - gbw_hz
  - slew_rate_vus
  - vnoise_nvhz
  - vos_v
  - vos_drift_uvc
  - cmrr_db
  - input_voltage_range
  - output_type
  - rail_to_rail
  - input_bias_current_a
  - supply_current_a
  - output_current_per_channel_a
  - supply_min_v
  - supply_max_v
  - isolation_voltage_v
  - isolation_type
  - isolation_common_mode_transient_kv_us
  - mounting_type
  - package_code
  - size_dim_text
  - height_mm_text
  - operating_temp_range